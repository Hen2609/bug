{
  "version": 3,
  "sources": ["../../marko/src/runtime/helpers/dynamic-tag.js"],
  "sourcesContent": ["\"use strict\";\n\nvar complain = \"MARKO_DEBUG\" && require(\"complain\");\nvar changeCase = require(\"./_change-case\");\nvar ComponentsContext = require(\"../components/ComponentsContext\");\nvar getComponentsContext = ComponentsContext.___getComponentsContext;\nvar ComponentDef = require(\"../components/ComponentDef\");\nvar w10NOOP = require(\"warp10/constants\").NOOP;\nvar RENDER_BODY_TO_JSON = function () {\n  return w10NOOP;\n};\n\nvar FLAG_WILL_RERENDER_IN_BROWSER = 1;\n// var FLAG_HAS_RENDER_BODY = 2;\nvar IS_SERVER = typeof window === \"undefined\";\n\n/**\n * Helper to render a dynamic tag\n */\nmodule.exports = function dynamicTag(\n  out,\n  tag,\n  getAttrs,\n  renderBody,\n  args,\n  props,\n  componentDef,\n  key,\n  customEvents\n) {\n  if (tag) {\n    if (tag.default) {\n      tag = tag.default;\n    }\n\n    var attrs = getAttrs && getAttrs();\n    var component = componentDef && componentDef.___component;\n    if (typeof tag === \"string\") {\n      if (renderBody) {\n        out.___beginElementDynamic(\n          tag,\n          attrs,\n          key,\n          componentDef,\n          addEvents(componentDef, customEvents, props)\n        );\n        renderBody(out);\n        out.___endElement();\n      } else {\n        out.___elementDynamic(\n          tag,\n          attrs,\n          key,\n          componentDef,\n          addEvents(componentDef, customEvents, props)\n        );\n      }\n    } else {\n      if (attrs == null) {\n        attrs = { renderBody: renderBody };\n      } else if (typeof attrs === \"object\") {\n        attrs = attrsToCamelCase(attrs);\n        if (renderBody) {\n          attrs.renderBody = renderBody;\n        }\n      }\n\n      var renderer =\n        tag._ ||\n        tag.render ||\n        (tag.renderer && tag.renderer.renderer) ||\n        tag.renderer;\n\n      // eslint-disable-next-line no-constant-condition\n      if (\"MARKO_DEBUG\") {\n        if (tag.renderer && tag.renderer.renderer === renderer) {\n          complain(\n            \"An object with a 'renderer' was passed to the dynamic tag, but renderer was another template.\"\n          );\n        }\n      }\n\n      if (renderer) {\n        out.c(componentDef, key, customEvents);\n        renderer(attrs, out);\n        out.___assignedComponentDef = null;\n      } else {\n        var render = (tag && tag.renderBody) || tag;\n        var isFn = typeof render === \"function\";\n\n        // eslint-disable-next-line no-constant-condition\n        if (\"MARKO_DEBUG\") {\n          if (render.safeHTML || render.toHTML) {\n            throw new Error(\n              \"Using `<include(x)/>` or the `<${dynamic}/>` tags with a `{ safeHTML: ... }` object is no longer supported. Use the unescaped text placeholder syntax instead.\"\n            );\n          }\n        }\n        if (isFn) {\n          var flags = componentDef ? componentDef.___flags : 0;\n          var willRerender = flags & FLAG_WILL_RERENDER_IN_BROWSER;\n          var isW10NOOP = render === w10NOOP;\n          var preserve = IS_SERVER ? willRerender : isW10NOOP;\n          out.bf(key, component, preserve);\n          if (!isW10NOOP && isFn) {\n            var componentsContext = getComponentsContext(out);\n            var parentComponentDef = componentsContext.___componentDef;\n            var globalContext = componentsContext.___globalContext;\n            componentsContext.___componentDef = new ComponentDef(\n              component,\n              parentComponentDef.id + \"-\" + parentComponentDef.___nextKey(key),\n              globalContext\n            );\n            render.toJSON = RENDER_BODY_TO_JSON;\n\n            if (args) {\n              render.apply(null, [out].concat(args, attrs));\n            } else {\n              render(out, attrs);\n            }\n\n            componentsContext.___componentDef = parentComponentDef;\n          }\n          out.ef();\n        } else {\n          out.error(\"Invalid dynamic tag value\");\n        }\n      }\n    }\n  } else if (renderBody) {\n    out.bf(\n      key,\n      component,\n      IS_SERVER &&\n        componentDef &&\n        componentDef.___flags & FLAG_WILL_RERENDER_IN_BROWSER\n    );\n    renderBody(out);\n    out.ef();\n  }\n};\n\nfunction attrsToCamelCase(attrs) {\n  var result = {};\n\n  for (var key in attrs) {\n    result[changeCase.___dashToCamelCase(key)] = attrs[key];\n  }\n\n  return result;\n}\n\nfunction addEvents(componentDef, customEvents, props) {\n  var len = customEvents ? customEvents.length : 0;\n\n  if (len === 0) {\n    return props;\n  }\n\n  var result = props || {};\n  var event;\n\n  for (var i = len; i--; ) {\n    event = customEvents[i];\n    result[\"on\" + event[0]] = componentDef.d(\n      event[0],\n      event[1],\n      event[2],\n      event[3]\n    );\n  }\n\n  return result;\n}\n"],
  "mappings": "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",
  "names": []
}
